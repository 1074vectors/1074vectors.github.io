<?php      function uploadimg($upimg,$uploaddir,$uploadfield)      {          if  (($_FILES['fileimg1']['type']=="image/gif"||$_FILES['fileimg1']['type']=="image/jpeg"||$_FILES['fileimg1']['type']=="image/bmp"||$_FILES['fileimg1']['type']=="image/pjpeg"||$_FILES['fileimg1']['type']=="image/png"))          {              if ($_FILES['fileimg1']['type']=="image/gif")                  $ext=".gif";              else if ($_FILES['fileimg1']['type']=="image/bmp")                  $ext=".bmp";              else if ($_FILES['fileimg1']['type']=="image/png")                  $ext=".png";              else                  $ext=".jpg";              move_uploaded_file($_FILES['fileimg1']['tmp_name'], $uploaddir."img".$upimg.$ext);              $strTempFilename="img".$upimg."".$ext;              createthumb($uploaddir."img$upimg$ext",$uploaddir."thumb_img$upimg$ext",132,158);              return  $strTempFilename;          }      }      function createthumb($original_image,$new_image,$new_width,$new_height)      {          list($width, $height, $type, $attr) = getimagesize($original_image);          if($type==1){ //gif              $image_handle = imagecreatefromgif($original_image);              $resized_image = imagecreatetruecolor($new_width, $new_height) or $resized_image = imagecreate($new_width, $new_width);              imagecopyresampled($resized_image, $image_handle, 0, 0, 0, 0, $new_width, $new_height, $width, $height);              imagegif($resized_image, $new_image);          }elseif($type==2){ //jpg              $image_handle = imagecreatefromjpeg($original_image);              $resized_image = imagecreatetruecolor($new_width, $new_height) or $resized_image = imagecreate($new_width, $new_width);              imagecopyresampled($resized_image, $image_handle, 0, 0, 0, 0, $new_width, $new_height, $width, $height);              imagejpeg($resized_image, $new_image);          }else if($type==3){ //png              $image_handle = imagecreatefrompng($original_image);              $resized_image = imagecreatetruecolor($new_width, $new_height) or $resized_image = imagecreate($new_width, $new_width);              imagecopyresampled($resized_image, $image_handle, 0, 0, 0, 0, $new_width, $new_height, $width, $height);              imagepng($resized_image, $new_image);          }          imagedestroy($resized_image);          imagedestroy($image_handle);      }?>